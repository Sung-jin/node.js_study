# 정리

* JPA 의 예외는 트랜잭션 롤백을 표시하는 예외와 아닌 예외로 나뉜다.
    * 트랜잭션 롤백을 표시하는 예외는 심각한 예외이고, 트랜잭션을 강제로 커밋해도 커밋되지 않고 롤백된다.
* 스프링 프레임워크는 JPA 의 예외를 스프링 프레임워크가 추상화한 예외로 변환해준다.
* 같은 영속성 컨텍스트의 동일한 엔티티를 비교할 때는 동일성 비교가 가능하다.
    * 하지만, 영속성 컨텍스트가 다르다면 동일성 비교시 실패한다.
    * 비즈니스 키 등으로 동등성 비교를 해야 한다.
* 프록시를 사용하는 클라이언트는 조회한 엔티티가 프록시인지 원본 엔티티인지 구분하지 않고 사용할 수 있어야 한다.
* JPA 를 사용할 때 N+1 문제를 조심해야 하고, 이는 주로 페치 조인을 사용해서 해결할 수 있다.
* 엔티티를 읽기 전용으로 조회하면 스냅샷을 유지할 필요가 없고, 영속성 컨텍스트를 플러시하지 않아도 된다.
* 대량의 엔티티를 배치 처리하려면 적절한 시점에 플러시와 영속성 컨텍스트 초기화가 필요하다.
* JPA 는 SQL 힌트를 제공하지 않지만, 하이버네이트 구현체를 사용하면 SQL 힌트를 사용할 수 있다.
* 트랜잭션을 지원하는 쓰기 지연 덕분에 SQL 배치 기능을 사용할 수 있다.
